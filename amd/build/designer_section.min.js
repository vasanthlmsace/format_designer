define ("format_designer/designer_section",["jquery","core/fragment","core/templates","core/loadingicon"],function(a,b,c,d){var e=function(b,c){var d=this;d.courseId=b;d.contextId=c;var e=document.querySelectorAll(this.SectionController+" .dropdown-menu a");if(e){e.forEach(function(a){a.addEventListener("click",d.sectionLayoutaction.bind(d))})}a(d.moduleBlock).on("click","li .card-body",this.moduleHandler.bind(this))};e.prototype.moduleHandler=function(b){b.preventDefault();if(0==a(b.target).parents(".call-action-block").length){var c=a(b.currentTarget).closest(".card").attr("data-url");if(c){window.open(c,"_self")}}else{var d=a(b.currentTarget).find(".restrict-block");if(d){if(!d.hasClass("show")){d.addClass("show")}else{d.removeClass("show")}}}};e.prototype.sectionLayoutaction=function(e){var f=this,g=this,h=e.target.closest("li.section").getAttribute("id"),i="#"+h+" "+g.loadingElement;d.addIconToContainerWithPromise(i);var j=a(e.currentTarget).data("value"),k=a(e.currentTarget).text();a(e.target).parents(".dropdown").find(".btn").html(k);a(e.target).parents(".dropdown").find(".btn").val(j);a(e.target).parent().find("a.dropdown-item").each(function(){a(this).removeClass("active")});a(e.target).addClass("active");var l=e.target.closest("li.section").getAttribute("data-sectionid"),m={courseid:g.courseId,sectionnumber:l,sectioncol:a(e.currentTarget).data("option"),sectioncolvalue:j};b.loadFragment("format_designer","get_section_modules",g.contextId,m).done(function(b,d){if(b){var e=".course-content .designer #section-".concat(l," #designer-section-content");c.replaceNode(e,b,d);a(i).empty();a(g.moduleBlock).on("click","li .card-body",g.moduleHandler.bind(f))}})};e.prototype.SectionController=".designer #section-designer-action";e.prototype.RestrictInfo=".designer #designer-section-content .call-action-block";e.prototype.moduleBlock=".designer #designer-section-content";e.prototype.loadingElement=".icon-loader-block";return{init:function init(a,b){return new e(a,b)}}});
//# sourceMappingURL=designer_section.min.js.map
